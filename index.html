<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>UniEvents Portal</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
    rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background-color: #1a1c2c;
    }

    .no-scrollbar::-webkit-scrollbar {
      display: none;
    }

    .no-scrollbar {
      -ms-overflow-style: none;
      scrollbar-width: none;
    }

    .animate-fade-in {
      animation: fadeIn 0.6s ease-out forwards;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    #landing {
      position: relative;
      background-image: url('Photos/landingPage1.jpeg');
      background-size: cover;
      background-position: center;
    }

    #landing::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(to bottom, rgba(0, 0, 0, 0.6), rgba(26, 28, 44, 0.8));
    }

    #landing>* {
      position: relative;
      z-index: 1;
    }
  </style>
</head>

<body class="text-white antialiased">
  <div id="app"
    class="min-h-screen flex flex-col bg-gradient-to-b from-[#2d3244] via-[#1a1c2c] to-[#0f101a] no-scrollbar"
    style="scroll-behavior: smooth;">

    <!-- Landing Section -->
    <section id="landing" class="min-h-screen flex flex-col">
      <nav class="flex justify-between items-center px-6 py-4 md:px-12 md:py-6">
        <div class="text-2xl font-bold flex items-center landing-bg ">
          <span>Uni</span><span class="text-blue-500">Events</span>
        </div>
        <div class="flex items-center space-x-6">
          <a href="#login" class="text-white hover:text-blue-400 transition font-semibold">Login</a>
          <a href="#register"
            class="bg-white text-[#1a1c2c] hover:bg-blue-50 transition font-bold px-6 py-2 rounded-lg">Register</a>
        </div>
      </nav>

      <div class="flex-1 flex items-center justify-center text-center px-4">
        <div class="max-w-3xl animate-fade-in">
          <h1 class="text-6xl md:text-8xl font-black mb-6">
            UniEvents <br />
            <span class="text-blue-500">Portal</span>
          </h1>
          <p class="text-xl md:text-2xl text-gray-300 mb-10">
            A simple and professional way to manage your university event registrations.
          </p>
          <div class="flex flex-col sm:flex-row items-center justify-center space-y-4 sm:space-y-0 sm:space-x-6">
            <a href="#register"
              class="w-full sm:w-auto bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 px-10 rounded-xl text-lg transition">
              Get Started
            </a>
            <a href="#login"
              class="w-full sm:w-auto bg-white/10 border-2 border-white/30 hover:bg-white/20 text-white font-bold py-4 px-10 rounded-xl text-lg transition">
              Sign In
            </a>
          </div>
        </div>
      </div>
    </section>

    <!-- Login Section -->
    <section id="login" class="min-h-screen flex items-center justify-center px-4">
      <div class="w-full max-w-md bg-[#2d3244] rounded-2xl p-8 shadow-2xl animate-fade-in">
        <h2 class="text-3xl font-bold mb-6 text-center">Login</h2>
        <form id="loginForm" class="space-y-4">
          <div>
            <label class="block text-sm font-medium mb-2">Email</label>
            <input type="email" id="loginEmail"
              class="w-full px-4 py-3 rounded-lg bg-[#1a1c2c] border border-white/10 focus:border-blue-500 focus:outline-none"
              placeholder="example@charusat.edu.in" required>
            <p id="loginEmailError" class="text-red-400 text-xs mt-1 hidden">Email must be @charusat.edu.in or
              @charusat.ac.in</p>
          </div>
          <div>
            <label class="block text-sm font-medium mb-2">Password</label>
            <input type="password" id="loginPassword"
              class="w-full px-4 py-3 rounded-lg bg-[#1a1c2c] border border-white/10 focus:border-blue-500 focus:outline-none"
              placeholder="••••••••" required>
            <p id="loginPasswordError" class="text-red-400 text-xs mt-1 hidden">Password must be at least 8 characters
            </p>
          </div>
          <button type="submit"
            class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-lg transition">
            Sign In
          </button>
        </form>
        <p class="text-center mt-6 text-sm text-gray-400">
          Don't have an account? <a href="#register" class="text-blue-500 hover:underline">Register</a>
        </p>
        <a href="#landing" class="block text-center mt-4 text-sm text-gray-500 hover:text-gray-300">← Back to Home</a>
      </div>
    </section>

    <!-- Register Section -->
    <section id="register" class="min-h-screen flex items-center justify-center px-4">
      <div class="w-full max-w-md bg-[#2d3244] rounded-2xl p-8 shadow-2xl animate-fade-in">
        <h2 class="text-3xl font-bold mb-6 text-center">Register</h2>
        <form id="registerForm" class="space-y-4">
          <div>
            <label class="block text-sm font-medium mb-2">Full Name</label>
            <input type="text" id="fullName"
              class="w-full px-4 py-3 rounded-lg bg-[#1a1c2c] border border-white/10 focus:border-blue-500 focus:outline-none"
              placeholder="Enter Your Name" required>
          </div>
          <div>
            <label class="block text-sm font-medium mb-2">University Email</label>
            <input type="email" id="email"
              class="w-full px-4 py-3 rounded-lg bg-[#1a1c2c] border border-white/10 focus:border-blue-500 focus:outline-none"
              placeholder="example@charusat.edu.in" required>
            <p id="emailError" class="text-red-400 text-xs mt-1 hidden">Email must be @charusat.edu.in or
              @charusat.ac.in</p>
          </div>
          <div>
            <label class="block text-sm font-medium mb-2">Password</label>
            <input type="password" id="password"
              class="w-full px-4 py-3 rounded-lg bg-[#1a1c2c] border border-white/10 focus:border-blue-500 focus:outline-none"
              placeholder="••••••••" required>
            <p id="passwordError" class="text-red-400 text-xs mt-1 hidden">Password must be at least 8 characters</p>
          </div>
          <div>
            <label class="block text-sm font-medium mb-2">Confirm Password</label>
            <input type="password" id="confirmPassword"
              class="w-full px-4 py-3 rounded-lg bg-[#1a1c2c] border border-white/10 focus:border-blue-500 focus:outline-none"
              placeholder="••••••••" required>
            <p id="confirmPasswordError" class="text-red-400 text-xs mt-1 hidden">Passwords do not match</p>
          </div>
          <button type="submit"
            class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-lg transition">
            Create Account
          </button>
        </form>
        <p class="text-center mt-6 text-sm text-gray-400">
          Already have an account? <a href="#login" class="text-blue-500 hover:underline">Login</a>
        </p>
        <a href="#landing" class="block text-center mt-4 text-sm text-gray-500 hover:text-gray-300">← Back to Home</a>
      </div>
    </section>

    <footer class="py-8 text-center border-t border-white/5 opacity-40">
      <p class="text-xs tracking-widest font-bold uppercase">
        EXCLUSIVE FOR CHARUSAT UNIVERSITY STUDENTS
      </p>
    </footer>
  </div>

  <script>
    document.getElementById('loginForm').addEventListener('submit', function (e) {
      e.preventDefault();

      const email = document.getElementById('loginEmail').value;
      const password = document.getElementById('loginPassword').value;
      let isValid = true;

      const emailPattern = /^[^\s@]+@charusat\.(edu\.in|ac\.in)$/;
      if (!emailPattern.test(email)) {
        document.getElementById('loginEmailError').classList.remove('hidden');
        isValid = false;
      } else {
        document.getElementById('loginEmailError').classList.add('hidden');
      }

      if (password.length < 8) {
        document.getElementById('loginPasswordError').classList.remove('hidden');
        isValid = false;
      } else {
        document.getElementById('loginPasswordError').classList.add('hidden');
      }

      if (isValid) {
        alert('Login successful!');
        this.reset();
      }
    });

    document.getElementById('registerForm').addEventListener('submit', function (e) {
      e.preventDefault();

      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;
      const confirmPassword = document.getElementById('confirmPassword').value;

      let isValid = true;

      // Email validation
      const emailPattern = /^[^\s@]+@charusat\.(edu\.in|ac\.in)$/;
      if (!emailPattern.test(email)) {
        document.getElementById('emailError').classList.remove('hidden');
        isValid = false;
      } else {
        document.getElementById('emailError').classList.add('hidden');
      }

      // Password length validation
      if (password.length < 8) {
        document.getElementById('passwordError').classList.remove('hidden');
        isValid = false;
      } else {
        document.getElementById('passwordError').classList.add('hidden');
      }

      // Password match validation
      if (password !== confirmPassword) {
        document.getElementById('confirmPasswordError').classList.remove('hidden');
        isValid = false;
      } else {
        document.getElementById('confirmPasswordError').classList.add('hidden');
      }

      if (isValid) {
        const fullName = document.getElementById('fullName').value;
        
        fetch('http://localhost:5000/api/register', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ fullName, email, password })
        })
        .then(res => res.json())
        .then(data => {
          alert(data.message);
          if (data.message === 'Registration successful') {
            this.reset();
            window.location.hash = '#login';
          }
        })
        .catch(err => alert('Error: ' + err));
      }
    });

    document.getElementById('loginForm').addEventListener('submit', async function (e) {
      e.preventDefault();
      const email = document.getElementById('loginEmail').value;
      const password = document.getElementById('loginPassword').value;
      
      fetch('http://localhost:5000/api/login', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ email, password })
      })
      .then(res => res.json())
      .then(data => {
        alert(data.message);
        if (data.message === 'Login successful') {
          this.reset();
        }
      })
      .catch(err => alert('Error: ' + err));
    });
    </script>
  </body>
</html>